(this["webpackJsonplearn-react-01"]=this["webpackJsonplearn-react-01"]||[]).push([[0],{109:function(e,t,n){},110:function(e,t,n){},121:function(e,t,n){},130:function(e,t,n){e.exports=n.p+"static/media/preloader.4f318f35.svg"},131:function(e,t,n){e.exports=n.p+"static/media/logo.52694f72.png"},14:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return p}));var a=n(2),r=n.n(a),c=n(8),o=n(125),u=o.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"4c7b227d-d83d-45ab-9f12-6ba2c0dc507f"}}),i={getUsersProfile:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.get("profile/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()},setUsersProfile:function(e){return Object(c.a)(r.a.mark((function t(){var n,a,c,o,i,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.aboutMe,a=e.fullName,c=e.lookingForAJob,o=e.lookingForAJobDescription,i=e.contacts,t.next=3,u.put("profile",{aboutMe:n,fullName:a,lookingForAJob:c,lookingForAJobDescription:o,contacts:i});case 3:return s=t.sent,t.abrupt("return",s.data);case 5:case"end":return t.stop()}}),t)})))()},getStatus:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.get("profile/status/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()},updateStatus:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.put("profile/status",{status:e});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()},putProfilePhoto:function(e){return Object(c.a)(r.a.mark((function t(){var n,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("image",e),t.next=4,u.put("profile/photo",n,{headers:{"Content-Type":"multipart/form-data"}});case 4:return a=t.sent,t.abrupt("return",a.data);case 6:case"end":return t.stop()}}),t)})))()}},s={getUsers:function(){var e=arguments;return Object(c.a)(r.a.mark((function t(){var n,a,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,a=e.length>1&&void 0!==e[1]?e[1]:10,t.next=4,u.get("users?page=".concat(n,"&count=").concat(a));case 4:return c=t.sent,t.abrupt("return",c.data);case 6:case"end":return t.stop()}}),t)})))()},follow:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.post("follow/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()},unfollow:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.delete("follow/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()}},l={getAuthData:function(){return Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("auth/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))()},login:function(e,t,n,a){return Object(c.a)(r.a.mark((function c(){var o;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a});case 2:return o=r.sent,r.abrupt("return",o.data);case 4:case"end":return r.stop()}}),c)})))()},logout:function(){return Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.delete("auth/login");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))()}},p={getCaptcha:function(){return Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("security/get-captcha-url");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))()}}},159:function(e,t,n){e.exports=n(293)},161:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){},250:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a);n(161),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(6),o=n(2),u=n.n(o),i=n(8),s=n(41),l=n(10),p=n(14),f="social-network/profile/ADD-POST",m="social-network/profile/DELETE_POST",d="social-network/profile/SET_PROFILE_INFO",h="social-network/profile/TOGGLE_IS_FETCHING",g="social-network/profile/SET_STATUS",b="social-network/profile/SET_PROFILE_IMAGE",E={fullName:"",profileImage:"",aboutMe:"",posts:[],status:"",lookingForAJob:!1,lookingForAJobDescription:"",contacts:{},isFetching:!1},v=function(e){return{type:f,newPostText:e}},w=function(e){return Object(l.a)({type:d},e)},O=function(e){return{type:b,imageUrl:e}},j=function(e){return{type:g,status:e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:var n={id:e.posts.length,message:t.newPostText,likeCount:2};return Object(l.a)({},e,{posts:[].concat(Object(s.a)(e.posts),[n])});case m:return Object(l.a)({},e,{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case d:return Object(l.a)({},e,{fullName:t.fullName,aboutMe:t.aboutMe,contacts:t.contacts,lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription});case b:return Object(l.a)({},e,{profileImage:t.imageUrl});case h:return Object(l.a)({},e,{isFetching:!e.isFetching});case g:return Object(l.a)({},e,{status:t.status});default:return e}},y="social-network/dialogs/ADD-MESSAGE",x={dialogs:[{id:0,Name:"Masha"},{id:1,Name:"Misha"},{id:2,Name:"Sasha"},{id:3,Name:"Pasha"},{id:4,Name:"Dasha"}],messages:[{id:0,text:"buy"},{id:1,text:"hello"},{id:2,text:"hey"},{id:3,text:"where are you"},{id:4,text:"miss u"}]},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:var n={id:e.messages.length,text:t.newMessageText};return Object(l.a)({},e,{messages:[].concat(Object(s.a)(e.messages),[n])});default:return e}},I=n(64),S=n(34),P="social-network/auth/SET_USER_DATA",_="social-network/auth/SET_CAPTCHA_URL",A={userId:null,login:null,email:null,isAuth:!1,isCaptchaRequired:!1,captchaUrl:null},C=function(e,t,n,a){return{type:P,payload:{userId:e,login:t,email:n,isAuth:a}}},F=function(e){return{type:"social-network/auth/TOGGLE_IS_CAPTCHA_REQUIRED",flag:e}},T=function(e){return{type:_,captchaUrl:e}},L=function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){var n,a,r,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getAuthData();case 2:0===(n=e.sent).resultCode&&(a=n.data,r=a.id,c=a.login,o=a.email,t(C(r,c,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(l.a)({},e,{},t.payload);case"social-network/auth/TOGGLE_IS_CAPTCHA_REQUIRED":return Object(l.a)({},e,{isCaptchaRequired:t.flag});case _:return Object(l.a)({},e,{captchaUrl:t.captchaUrl});default:return e}},D=n(126),R=n(124),M={isInitialized:!1},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"social-network/app/TOGGLE_IS_INITIALIZED":return Object(l.a)({},e,{isInitialized:t.flag});default:return e}},J=Object(c.c)({dialogPage:N,profilePage:k,friendsPage:I.a,auth:U,form:R.a,app:G}),z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,B=Object(c.e)(J,z(Object(c.a)(D.a))),q=n(53),H=n.n(q),W=n(19),V=n(20),Q=n(22),X=n(21),Z=(n(242),n(12)),K=(n(243),function(){return r.a.createElement("div",{className:"NavBar_padding"},r.a.createElement("nav",null,r.a.createElement("div",null,r.a.createElement(Z.c,{className:"NavBar-NavLink",to:"/profile"},"Profile")),r.a.createElement("div",null,r.a.createElement(Z.c,{className:"NavBar-NavLink",to:"/dialogs"},"Messages")),r.a.createElement("div",null,r.a.createElement(Z.c,{className:"NavBar-NavLink",to:"/friends"},"Friends")),r.a.createElement("div",null,r.a.createElement(Z.c,{className:"NavBar-NavLink",to:"/news"},"News"))))}),Y=n(24),$=(n(248),n(62)),ee=Object(c.d)($.a)((function(){return r.a.createElement("div",{className:"News_padding"},r.a.createElement("h1",null,"Today is Masha's birthday!!!!!!"),r.a.createElement("img",{width:"400px",src:"https://i.pinimg.com/originals/d0/40/d3/d040d35c4329b603f887b7344af88c64.jpg"}))})),te=(n(109),n(249),function(e){return r.a.createElement("div",null,e.text)}),ne=(n(250),function(e){var t="/dialogs/"+e.id;return r.a.createElement("div",null,r.a.createElement(Z.c,{to:t,className:"Dialog-NavLink"},e.name))}),ae=n(122),re=n(123),ce=n(132),oe=(n(110),function(e){var t=e.input,n=e.meta,a=Object(ce.a)(e,["input","meta"]),c=n.touched&&n.error?"FormError-Input":null;return r.a.createElement("div",{className:"FormError"},r.a.createElement(a.element,Object.assign({},t,a,{className:c})),n.touched&&n.error&&r.a.createElement("span",{className:"FormError-Text"},n.error))}),ue=function(e){return r.a.createElement(oe,Object.assign({},e,{element:"textarea"}))},ie=function(e){return r.a.createElement(oe,Object.assign({},e,{element:"input"}))},se=function(e){if(!e)return"Field is required"},le=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols!")}},pe=le(100),fe=Object(re.a)({form:"dialogAddMessageForm"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(ae.a,{component:ue,name:"newMessageText",placeholder:"Enter new message:",validate:[se,pe]}),r.a.createElement("div",null,r.a.createElement("button",null,"add")))})),me=function(e){var t=e.dialogPage.dialogs.map((function(e){return r.a.createElement(ne,{id:e.id,name:e.Name,key:e.id})})),n=e.dialogPage.messages.map((function(e){return r.a.createElement(te,{text:e.text,key:e.id})}));return r.a.createElement("div",{className:"Dialogs_gridTemplate Dialogs_padding"},r.a.createElement("div",null,t),r.a.createElement("div",null,n,r.a.createElement(fe,{onSubmit:function(t){e.addMessage(t.newMessageText)}})))},de=n(11),he=function(e){Object(Q.a)(n,e);var t=Object(X.a)(n);function n(){return Object(W.a)(this,n),t.apply(this,arguments)}return Object(V.a)(n,[{key:"render",value:function(){return r.a.createElement(me,this.props)}}]),n}(r.a.Component),ge=Object(c.d)($.a,Object(de.b)((function(e){return{dialogPage:e.dialogPage,isAuth:e.auth.isAuth}}),{addMessage:function(e){return{type:y,newMessageText:e}}}))(he),be=(n(288),n(52)),Ee=(n(289),function(e){var t=Object(a.useState)(!1),n=Object(be.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(e.status),i=Object(be.a)(u,2),s=i[0],l=i[1];return Object(a.useEffect)((function(){l(e.status)}),[e.status]),r.a.createElement(r.a.Fragment,null,c&&r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:s,onChange:function(e){l(e.currentTarget.value)},onBlur:function(){e.changeStatus(s),o(!1)},autoFocus:!0})),!c&&r.a.createElement("div",{onDoubleClick:function(){return o(!0)}},r.a.createElement("span",null,e.status||"How are you doing?")))}),ve=n(89),we=n.n(ve),Oe=function(e){return r.a.createElement("div",null,e.contactName,": ",e.contactValue)},je=function(e){return r.a.createElement("div",null,r.a.createElement("div",null,e.fullName),r.a.createElement("hr",null),r.a.createElement("div",null,e.aboutMe),r.a.createElement("div",null,"Looking for a job: ",e.lookingForAJob?"yes":"no"),r.a.createElement("div",null,e.lookingForAJobDescription),r.a.createElement("div",null,Object.keys(e.contacts).map((function(t,n){return r.a.createElement(Oe,{key:n,contactName:t,contactValue:e.contacts[t]})}))))},ke=function(e){return r.a.createElement(r.a.Fragment,null,e.contactName,":",r.a.createElement(ae.a,{component:ie,name:"contacts.".concat(e.contactName)}))},ye=Object(c.d)(Object(de.b)((function(e){return{initialValues:e.profilePage}}),{}),Object(re.a)({form:"aboutMeChanging"}))((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(ae.a,{component:ie,name:"fullName",placeholder:"Full Name:"}),r.a.createElement(ae.a,{component:ue,name:"aboutMe",placeholder:"Tell something about yourself:"}),r.a.createElement("label",null,"Are you looking for a job?",r.a.createElement(ae.a,{component:ie,name:"lookingForAJob",type:"checkbox"})),r.a.createElement(ae.a,{component:ie,name:"lookingForAJobDescription",placeholder:"Why are you looking for a job?:"}),r.a.createElement("b",null,"Contacts"),r.a.createElement("div",null,Object.keys(e.initialValues.contacts).map((function(e,t){return r.a.createElement(ke,{key:t,contactName:e})}))),r.a.createElement("button",null,"save"))})),xe=function(e){var t=Object(a.useState)(!1),n=Object(be.a)(t,2),c=n[0],o=n[1];return r.a.createElement("div",{className:"ProfileInfo-Wrapper"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("img",{className:"ProfileInfo-Image",src:e.profileImage||we.a})),e.isOwner&&r.a.createElement("input",{className:"FileInput",type:"file",onChange:function(t){t.target.files.length&&e.uploadProfileImage(t.target.files[0])}}),r.a.createElement("div",null,"Status:"),e.isOwner&&r.a.createElement(Ee,{status:e.status,changeStatus:e.changeStatus}),!e.isOwner&&r.a.createElement("div",null,"props.status")),r.a.createElement("div",null,!c&&r.a.createElement("div",null,r.a.createElement(je,{fullName:e.fullName,aboutMe:e.aboutMe,contacts:e.contacts,lookingForAJob:e.lookingForAJob,lookingForAJobDescription:e.lookingForAJobDescription}),e.isOwner&&r.a.createElement("button",{onClick:function(){return o(!0)}},"Change information about you ")),c&&r.a.createElement(ye,{onSubmit:function(t){e.changeProfileInfo(t),o(!1)}})),r.a.createElement("iframe",{style:{border:"0px #ffffff none"},id:"InvestReadyiFrame",name:"InvestReady",scrolling:"false",frameBorder:"0",marginHeight:"0px",marginWidth:"0px",height:"550px",width:"100%",allowFullScreen:!0}))},Ne=(n(121),n(290),function(e){return r.a.createElement("div",{className:"post"},r.a.createElement("img",{alt:"user icon",src:"https://yt3.ggpht.com/a/AGF-l78D8sRdVCMJf7gg7Is2apd6wxydsVsoRJ6zPQ=s900-c-k-c0xffffffff-no-rj-mo"}),e.message,r.a.createElement("div",null,e.likeCount," likes"))}),Ie=le(200),Se=Object(re.a)({form:"profileAddPostForm"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(ae.a,{name:"newPostText",component:ue,placeholder:"Enter new post text",validate:[se,Ie]})),r.a.createElement("div",null,r.a.createElement("button",null,"Post")))})),Pe=function(e){var t=e.posts.map((function(e){return r.a.createElement(Ne,{message:e.message,likeCount:e.likeCount,key:e.id})}));return r.a.createElement("div",null,r.a.createElement("div",{className:"my-posts__new-post"},r.a.createElement(Se,{onSubmit:function(t){e.addPost(t.newPostText)}})),r.a.createElement("div",{className:"my-posts__post-list"},t))},_e=Object(de.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),{addPost:v})(Pe),Ae=function(e){return r.a.createElement("div",{className:"Profile_padding"},r.a.createElement(xe,e),r.a.createElement(_e,null))},Ce=n(45),Fe=function(e){Object(Q.a)(n,e);var t=Object(X.a)(n);function n(){return Object(W.a)(this,n),t.apply(this,arguments)}return Object(V.a)(n,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,n){(this.props.match.params.userId!==e.match.params.userId||!this.props.match.params.userId&&this.props.authorizedUserId!==e.authorizedUserId)&&this.refreshProfile()}},{key:"refreshProfile",value:function(){var e=this.props.match.params.userId||this.props.authorizedUserId;e||this.props.history.push("/login"),this.props.getUsersProfile(e),this.props.getUsersStatus(e)}},{key:"render",value:function(){var e=!this.props.match.params.userId||this.props.match.params.userId===this.props.authorizedUserId;return a.createElement(a.Fragment,null,a.createElement(Ae,Object.assign({},this.props,{isOwner:e})))}}]),n}(a.Component),Te=Object(c.d)(Y.g,Object(de.b)((function(e){return Object(l.a)({authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth},e.profilePage)}),{addPost:v,toggleIsFetching:I.f,getUsersProfile:function(e){return function(){var t=Object(i.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.b.getUsersProfile(e);case 2:a=t.sent,n(w(a)),n(O(a.photos.large));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUsersStatus:function(e){return function(){var t=Object(i.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.b.getStatus(e);case 2:a=t.sent,n(j(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},changeStatus:function(e){return function(){var t=Object(i.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.b.updateStatus(e);case 2:0===t.sent.resultCode&&n(j(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},uploadProfileImage:function(e){return function(){var t=Object(i.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.b.putProfilePhoto(e);case 2:0===(a=t.sent).resultCode&&n(O(a.data.photos.large)),console.log(a.messages);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},changeProfileInfo:function(e){return function(){var t=Object(i.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.b.setUsersProfile(e);case 2:0===(a=t.sent).resultCode?n(w(e)):console.log(a.messages);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}))(Fe),Le=(n(291),n(131)),Ue=n.n(Le),De=function(e){return r.a.createElement("header",{className:"Header"},r.a.createElement("img",{className:"SiteLogo",src:Ue.a}),r.a.createElement("div",{className:"LoginBlock"},e.isAuth&&r.a.createElement("div",null,e.login,r.a.createElement("br",null),r.a.createElement("button",{onClick:e.logout},"Logout")),!e.isAuth&&r.a.createElement(Z.c,{to:"/login"},"Login")))},Re=function(e){Object(Q.a)(n,e);var t=Object(X.a)(n);function n(){return Object(W.a)(this,n),t.apply(this,arguments)}return Object(V.a)(n,[{key:"render",value:function(){return r.a.createElement(De,this.props)}}]),n}(r.a.Component),Me=Object(de.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.logout();case 2:0===e.sent.resultCode&&t(C(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Re),Ge=Object(re.a)({form:"login"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(ae.a,{placeholder:"Login",name:"login",type:"text",component:ie,validate:[se]})),r.a.createElement("div",null,r.a.createElement(ae.a,{placeholder:"Password",name:"password",type:"password",component:ie,validate:[se]})),r.a.createElement("div",null,r.a.createElement(ae.a,{name:"rememberMe",type:"checkbox",component:ie}),"remember me"),e.error&&r.a.createElement("div",{className:"FormError_summary"},"Incorrect login or password"),e.isCaptchaRequired&&r.a.createElement("img",{src:e.captchaUrl}),e.isCaptchaRequired&&r.a.createElement("div",null,r.a.createElement(ae.a,{name:"captcha",placeholder:"captcha",type:"text",validate:[se],component:ie})),r.a.createElement("div",null,r.a.createElement("button",null,"Login")))})),Je=(n(292),function(e){Object(Q.a)(n,e);var t=Object(X.a)(n);function n(){return Object(W.a)(this,n),t.apply(this,arguments)}return Object(V.a)(n,[{key:"render",value:function(){var e=this;return this.props.isAuth?r.a.createElement(Y.a,{to:"/profile"}):r.a.createElement("div",{className:"Login_padding"},r.a.createElement("h1",null,"Login"),r.a.createElement(Ge,{onSubmit:function(t){e.props.login(t.login,t.password,t.rememberMe,t.captcha)},isCaptchaRequired:this.props.isCaptchaRequired,captchaUrl:this.props.captchaUrl}),r.a.createElement("p",null,"If you don't have an account, use test login and password."),r.a.createElement("p",null,"Login: free@samuraijs.com"),r.a.createElement("p",null,"Password: free"))}}]),n}(r.a.Component)),ze=Object(de.b)((function(e){return{isAuth:e.auth.isAuth,isCaptchaRequired:e.auth.isCaptchaRequired,captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,n,a){return function(){var r=Object(i.a)(u.a.mark((function r(c){var o,s;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.login(e,t,n,a);case 2:o=r.sent,c(F(!1)),0===o.resultCode?(c(L()),c(T(null))):(10===o.resultCode&&(c(F(!0)),c(function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.c.getCaptcha();case 2:n=e.sent,t(T(n.url));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),s=o.messages.length>0?o.messages[0]:"Something wrong",c(Object(S.a)("login",{_error:s})));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})(Je),Be=function(e){var t=function(t){return r.a.createElement(de.a,{store:B},r.a.createElement(e,t))};return t.displayName="withStoreProvider(".concat(e.displayName||e.name||"Component",")"),t},qe=function(e){var t=function(t){return r.a.createElement(a.Suspense,{fallback:r.a.createElement(Ce.a,null)},r.a.createElement(e,t))};return t.displayName="withSuspense(".concat(e.displayName||e.Name||"Component",")"),t},He=function(e){var t=function(t){return r.a.createElement(Z.b,null,r.a.createElement(e,t))};return t.displayName="withHashRouter(".concat(e.displayName||e.name||"Component",")"),t},We=r.a.lazy((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,406))})),Ve=function(e){Object(Q.a)(n,e);var t=Object(X.a)(n);function n(){return Object(W.a)(this,n),t.apply(this,arguments)}return Object(V.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.isInitialized?r.a.createElement("div",{className:"app-wrapper"},r.a.createElement("div",{className:"app-wrapper__header"},r.a.createElement(Me,null)),r.a.createElement("div",{className:"app-wrapper__nav"},r.a.createElement(K,null)),r.a.createElement("div",{className:"app-wrapper__content"},r.a.createElement(Y.d,null,r.a.createElement(Y.a,{exact:!0,from:"/",to:"/profile"}),r.a.createElement(Y.b,{path:"/dialogs",render:function(){return r.a.createElement(ge,null)}}),r.a.createElement(Y.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(Te,null)}}),r.a.createElement(Y.b,{path:"/news",render:function(){return r.a.createElement(ee,null)}}),r.a.createElement(Y.b,{path:"/friends",render:function(){return qe(We)()}}),r.a.createElement(Y.b,{path:"/login",render:function(){return r.a.createElement(ze,null)}}),r.a.createElement(Y.b,{path:"*",render:function(){return r.a.createElement("h1",null,"404: Page not found")}})))):r.a.createElement(Ce.a,null)}}]),n}(r.a.Component),Qe=Object(c.d)(He,Be,Y.g,Object(de.b)((function(e){return{isInitialized:e.app.isInitialized}}),{initializeApp:function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(L());case 2:t({type:"social-network/app/TOGGLE_IS_INITIALIZED",flag:!0});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(Ve);H.a.render(r.a.createElement(Qe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},45:function(e,t,n){"use strict";var a=n(130),r=n.n(a),c=n(0),o=n.n(c);t.a=function(e){return o.a.createElement("div",null,o.a.createElement("img",{alt:"Loading...",className:"preloader",src:r.a}))}},62:function(e,t,n){"use strict";var a=n(19),r=n(20),c=n(22),o=n(21),u=n(0),i=n.n(u),s=n(24),l=n(11);t.a=function(e){var t=function(t){Object(c.a)(u,t);var n=Object(o.a)(u);function u(){return Object(a.a)(this,u),n.apply(this,arguments)}return Object(r.a)(u,[{key:"render",value:function(){return this.props.isAuth?i.a.createElement(e,this.props):i.a.createElement(s.a,{to:"/login"})}}]),u}(i.a.Component);t.displayName="withAuthRedirect(".concat(e.displayName||e.name||"Component",")");return Object(l.b)((function(e){return{isAuth:e.auth.isAuth}}),{})(t)}},64:function(e,t,n){"use strict";n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return b})),n.d(t,"f",(function(){return E})),n.d(t,"g",(function(){return v})),n.d(t,"b",(function(){return w})),n.d(t,"e",(function(){return O}));var a=n(2),r=n.n(a),c=n(8),o=n(41),u=n(10),i=n(14),s=function(e,t,n,a){return e.map((function(e){return e[t]===n?Object(u.a)({},e,{},a):e}))},l="social-network/friends/SET_FRIENDS",p="social-network/friends/TOGGLE_FOLLOWED",f="social-network/friends/SET_CURRENT_PAGE",m="social-network/friends/SET_TOTAL_USERS_COUNT",d="social-network/friends/TOGGLE_IS_FETCHING",h={friends:[],pageSize:5,totalUsersCount:20,currentPage:1,isFetching:!1,isFollowingInProgress:!1},g=function(e,t){return{type:p,friendId:e,flag:t}},b=function(e){return{type:f,pageNumber:e}},E=function(e){return{type:d,flag:e}},v=function(e){return{type:"social-network/friends/TOGGLE_IS_FOLLOWING_IN_PROGRESS",flag:e}},w=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(E(!0)),n.next=3,i.d.getUsers(e,t);case 3:c=n.sent,a((o=c.items,{type:l,friends:o})),a((r=c.totalCount,{type:m,totalCount:r})),a(E(!1));case 7:case"end":return n.stop()}var r,o}),n)})));return function(e){return n.apply(this,arguments)}}()},O=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(v(!0)),c=t?i.d.follow:i.d.unfollow,n.next=4,c(e);case 4:0===n.sent.resultCode&&a(g(e,t)),a(v(!1));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(u.a)({},e,{friends:Object(o.a)(t.friends)});case p:return Object(u.a)({},e,{friends:s(e.friends,"id",t.friendId,{followed:t.flag})});case f:return Object(u.a)({},e,{currentPage:t.pageNumber});case m:return Object(u.a)({},e,{totalUsersCount:t.totalCount});case d:return Object(u.a)({},e,{isFetching:t.flag});case"social-network/friends/TOGGLE_IS_FOLLOWING_IN_PROGRESS":return Object(u.a)({},e,{isFollowingInProgress:t.flag});default:return e}}},89:function(e,t,n){e.exports=n.p+"static/media/userIcon.d988dee4.png"}},[[159,1,2]]]);
//# sourceMappingURL=main.b175b024.chunk.js.map